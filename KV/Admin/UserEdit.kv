#:import C kivy.utils.get_color_from_hex

<UserEditScreen@Screen>:
    name: 'userEdit'
    FitImage:
        source: 'RES/IconsAndBGs/bg2.png'

    FloatLayout:
        MDLabel:
            text: 'EASYWARE'
            font_name: 'Nunito'
            color: "3b4949"
            font_size: .065 * root.height
            halign: 'right'
            padding: 
            size_hint: .5, .065
            pos_hint: {'right': .9 ,'top': .95}
        MDLabel:
            text: 'EDIT USER'
            font_name: 'Nunito'
            color: "ec8c6f"
            font_size: .035 * root.height
            halign: 'right'
            padding: 
            size_hint: .5, .035
            pos_hint: {'right': .9 ,'top': .89}
        
        MDCard:             #custom card
            size_hint: .75,.75
            md_bg_color: 1,1,1,.8
            pos_hint: {'center_x': 0.5,'center_y': .45}
            canvas.before:
                Color:
                    rgba: rgba(112,236,228,255)
                Line:
                    width: self.height * .0075
                    rounded_rectangle: self.x,self.y,self.width,self.height,4,4,4,4,100

        FloatLayout:
            size_hint: 1,1
            pos_hint: {'center_x': 0.5,'center_y': 0.51}
            MDCard:             #Change user profile image
                md_bg_color: 0,0,0,.05  
                size_hint: None,None
                size: root.height*.2,root.height*.2
                pos_hint: {'center_x': 0.5,'center_y': 0.675}

                FloatLayout:
                    size_hint: 1,1
                    Image:          #Employee Image
                        id: profileImage
                        source: 'RES/IconsAndBGs/userProfile.png'
                        pos_hint: {'center_x': 0.5,'center_y': 0.5}
                        allow_stretch: True
                        size_hint: .9, .9
                    MDCard:
                        on_release: app.temp("Working")
                        pos_hint: {'center_x': .9,'center_y': .1}
                        size_hint: .3, .3
                        md_bg_color: 0,0,0,0
                        Image:
                            source: 'RES/IconsAndBGs/image-edit.png'
                            allow_stretch: True
                            size_hint: 1,1
            MDLabel:
                text: 'FULL NAME:'
                font_name: 'Nunito'
                color: "3b4949"
                font_size: .025 * root.height
                halign: 'left'
                size_hint: .5, .065
                pos_hint: {'x': .175 ,'center_y': .541}

            CustomMDCard:               #Full name input
                pos_hint: {'center_x': .5,'center_y': 0.5}
                TextInput:
                    id: fullNameInput
                    pos_hint: {'x': 1,'center_y': 0.5}
                    hint_text: "Ex. Juan Dela Cruz"
                    font_name: 'Nunito'
                    font_size: .03 * root.height
                    halign: "left"
                    hint_text_color: "3b4949"
                    cursor_color: "3b4949"
                    foreground_color: "3b4949"
                    background_normal: ""
                    background_active: ""
                    background_color: (0,0,0,0)
                    multiline: False
                    padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
            
            MDLabel:
                text: 'POSITION:'
                font_name: 'Nunito'
                color: "3b4949"
                font_size: .025 * root.height
                halign: 'left'
                size_hint: .5, .065
                pos_hint: {'x': .175 ,'center_y': .451}

            CustomMDCard:               #position input
                pos_hint: {'center_x': .5,'center_y': 0.41}
                TextInput:
                    id: positionInput
                    pos_hint: {'x': 1,'center_y': 0.5}
                    hint_text: "Ex. Cashier"
                    font_name: 'Nunito'
                    font_size: .03 * root.height
                    halign: "left"
                    hint_text_color: "3b4949"
                    cursor_color: "3b4949"
                    foreground_color: "3b4949"
                    background_normal: ""
                    background_active: ""
                    background_color: (0,0,0,0)
                    multiline: False
                    padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]

            MDLabel:
                text: 'USER NAME:'
                font_name: 'Nunito'
                color: "3b4949"
                font_size: .025 * root.height
                halign: 'left'
                size_hint: .5, .065
                pos_hint: {'x': .175 ,'center_y': .361}

            MDLabel:
                id: userName
                text: ''
                color: 0,0,0,0

            CustomMDCard:               #user name input
                pos_hint: {'center_x': .5,'center_y': 0.32}
                TextInput:
                    id: userNameInput
                    pos_hint: {'x': 1,'center_y': 0.5}
                    hint_text: "enter username"
                    font_name: 'Nunito'
                    font_size: .03 * root.height
                    halign: "left"
                    hint_text_color: "3b4949"
                    cursor_color: "3b4949"
                    foreground_color: "3b4949"
                    background_normal: ""
                    background_active: ""
                    background_color: (0,0,0,0)
                    multiline: False
                    padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
            MDLabel:
                text: 'PASSWORD:'
                font_name: 'Nunito'
                color: "3b4949"
                font_size: .025 * root.height
                halign: 'left'
                size_hint: .5, .065
                pos_hint: {'x': .175 ,'center_y': .271}

            CustomMDCard:                  #password input
                pos_hint: {'center_x': .5,'center_y': 0.23}
                TextInput:
                    id: passwordInput
                    pos_hint: {'x': 1,'center_y': 0.5}
                    hint_text: "enter password"
                    font_name: 'Nunito'
                    font_size: .03 * root.height
                    halign: "left"
                    hint_text_color: "3b4949"
                    cursor_color: "3b4949"
                    foreground_color: "3b4949"
                    background_normal: ""
                    background_active: ""
                    background_color: (0,0,0,0)
                    multiline: False
                    padding_y: [self.height / 2.0 - (self.line_height / 2.0) * len(self._lines), 0]
            MDLabel:
                text: 'ADMIN ACCESS'
                font_name: 'Nunito'
                color: "3b4949"
                font_size: .029 * root.height
                halign: 'center'
                size_hint: .65, .065
                pos_hint: {'center_x': .4 ,'center_y': .1775}

            MDCheckbox:
                id: userType
                active: True
                size_hint: .07, .07
                pos_hint: {'center_x': .6, 'center_y': .1775}
                ripple_scale: 0                    

            Button:     #save edit user
                text: 'SAVE'
                text_color: '#ec8c6f'
                font_name: 'Nunito'
                font_size: root.height * .03
                size_hint: .2, .04
                pos_hint: {'center_x': .5,'top': 0.15}
                background_color: (0,0,0,0)
                on_press: 
                    app.editUser({'userName': userName.text,'updatedUserName':userNameInput.text,'accType':userType.active,'fName':fullNameInput.text,'position':positionInput.text,'password': passwordInput.text})
                canvas.before:
                    Color:
                        rgba: rgba(236,140,111,255)
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                        radius: [root.height * .005]
                        
            Button:
                text: 'DELETE'
                text_color: '#ec8c6f'
                font_name: 'Nunito'
                font_size: root.height * .03
                size_hint: .2, .04
                pos_hint: {'center_x': 0.275,'top': 0.15}
                background_color: (0,0,0,0)
                on_release: 
                    app.deleteUser(userName.text)
                    app.root.current = 'usersAdmin'
                canvas.before:
                    Color:
                        rgba: rgba(236,140,111,255)
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                        radius: [root.height * .005]
            
            Button:
                text: 'BACK'
                text_color: '#ec8c6f'
                font_name: 'Nunito'
                font_size: root.height * .03
                size_hint: .2, .04
                pos_hint: {'center_x': 0.725,'top': 0.15}
                background_color: (0,0,0,0)
                on_release: 
                    app.root.current = 'usersAdmin'
                canvas.before:
                    Color:
                        rgba: rgba(236,140,111,255)
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                        radius: [root.height * .005]

<CustomMDCard@MDCard>:
    size_hint: .65, .045
    canvas.before:
        Color:
            rgba: rgba(112,236,228,255)
        Line:
            width: self.height * .09
            rounded_rectangle: self.x,self.y,self.width,self.height,3,3,3,3,100